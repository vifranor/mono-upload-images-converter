var e={652:(e,t,o)=>{function r(e,t,o){return new Promise(((r,n)=>{const a=new Image;a.src=URL.createObjectURL(o),a.onload=()=>{const o=a.width,n=a.height,l=e/o,c=t/n,s=document.createElement("canvas");s.width=e,s.height=t;let i=0,h=0,f=0,d=0;const m=s.getContext("2d");if(o>n){const r=o/n;if(e>t){const a=e/t;r<a?(f=Math.floor(o),d=Math.floor(f/a),i=Math.floor((o-f)/2),h=Math.floor((n-d)/2)):r>a&&(f=Math.floor(n*a),d=Math.floor(n),i=Math.floor((o-f)/2),h=Math.floor((n-d)/2))}else if(e<t){const a=t/e;(r<a||r>a)&&(f=Math.floor(n/a),d=Math.floor(n),i=Math.floor((o-f)/2),h=Math.floor((n-d)/2))}else f=n,d=n,i=Math.floor((o-f)/2),h=Math.floor((n-d)/2);m.drawImage(a,i,h,f,d,0,0,e,t)}else if(o<n){const r=n/o;if(e>t){const a=e/t;(r<a||r>a)&&(f=Math.floor(o),d=Math.floor(o/a),i=Math.floor((o-f)/2),h=Math.floor((n-d)/2))}else if(e<t){const a=t/e;r<a?(f=Math.floor(n/a),d=Math.floor(n),i=Math.floor((o-f)/2),h=Math.floor((n-d)/2)):r>a&&(f=Math.floor(o),d=Math.floor(o*a),i=Math.floor((o-f)/2),h=Math.floor((n-d)/2))}else f=o,d=o,i=Math.floor((o-f)/2),h=Math.floor((n-d)/2);m.drawImage(a,i,h,f,d,0,0,e,t)}else o===n&&m.drawImage(a,0,0,e,t);m.scale(l,c),URL.revokeObjectURL(a.src),r(s)},a.onerror=()=>n(new Error("Image load error"))}))}o.d(t,{x:()=>a});const n=(e,t="image/webp",o=!1)=>{return r=void 0,n=void 0,l=function*(){try{return yield Promise.all(e).then((e=>((e,t)=>{const o=[];return e.forEach((e=>{o.push(new Promise(((o,r)=>{e.toBlob((e=>{e&&o(e),r(new Error("Blob with error"))}),t)})))})),Promise.all(o)})(e,t))).then((e=>{const r=[];for(let n=0;n<e.length;n++){const a=t.substring(t.indexOf("/")+1),l=new File([e[n]],`image_${n}.${a}`,{type:t});o&&e[n].type!==`image/${a}`&&console.error(`converted to ${e[n].type}, expected ${a}`),r.push(l)}return r}))}catch(e){throw new Error(`Something wrong with files, error message: ${e}`)}},new((a=void 0)||(a=Promise))((function(e,t){function o(e){try{s(l.next(e))}catch(e){t(e)}}function c(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(o,c)}s((l=l.apply(r,n||[])).next())}));var r,n,a,l},a=(e,t=500,o=500,a="image/webp",l=!1)=>{if(e){const c=[];for(let n=0;n<e.length;n++){const a=e.item(n);if(a){const e=r(t,o,a);c.push(e)}}return n(c,a,l)}return Promise.reject([])}}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r={};(()=>{o.d(r,{Y:()=>t});var e=o(652);function t(){console.log("wrapper loaded");const t=document.getElementById("button");t&&(t.onchange=function(){const o=t.files;if(o){const r=document.getElementById("before"),n=document.getElementById("after"),a=document.getElementById("label"),l=[t.files,500,500,"image/webp",!0];(0,e.x)(...l).then((e=>(console.log("Loaded with parameters:"),l.forEach(((e,t)=>{switch(t){case 1:console.log("Width",e);break;case 2:console.log("Height",e);break;case 3:console.log("Format",e);break;case 4:console.log("Debuggin",e)}})),e))).then((e=>{const t=document.getElementById("scale");return t.disabled=!1,t.onclick=function(){"100%"!==r.style.maxWidth&&"100%"!==n.style.maxWidth?(r.style.maxWidth="100%",n.style.maxWidth="100%",a.innerText="scaled"):(r.style.maxWidth="",n.style.maxWidth="",a.innerText="Not scaled")},e})).then((e=>{const t=URL.createObjectURL(o[0]);return r.src=t,r.style.display="inline",e})).then((e=>{const t=URL.createObjectURL(e[0]);n.src=t,n.style.display="inline"}))}})}window.wrapper=t})();var n=r.Y;export{n as wrapper};