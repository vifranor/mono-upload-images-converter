var o={d:(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o:(o,e)=>Object.prototype.hasOwnProperty.call(o,e)},e={};function t(o,e,t){return new Promise(((r,n)=>{const a=new Image;a.src=URL.createObjectURL(t),a.onload=()=>{const t=a.width,n=a.height,l=o/t,h=e/n,f=document.createElement("canvas");f.width=o,f.height=e;let c=0,i=0,s=0,M=0;const m=f.getContext("2d");if(t>n){const r=t/n;if(o>e){const a=o/e;r<a?(s=Math.floor(t),M=Math.floor(s/a),c=Math.floor((t-s)/2),i=Math.floor((n-M)/2)):r>a&&(s=Math.floor(n*a),M=Math.floor(n),c=Math.floor((t-s)/2),i=Math.floor((n-M)/2))}else if(o<e){const a=e/o;(r<a||r>a)&&(s=Math.floor(n/a),M=Math.floor(n),c=Math.floor((t-s)/2),i=Math.floor((n-M)/2))}else s=n,M=n,c=Math.floor((t-s)/2),i=Math.floor((n-M)/2);m.drawImage(a,c,i,s,M,0,0,o,e)}else if(t<n){const r=n/t;if(o>e){const a=o/e;(r<a||r>a)&&(s=Math.floor(t),M=Math.floor(t/a),c=Math.floor((t-s)/2),i=Math.floor((n-M)/2))}else if(o<e){const a=e/o;r<a?(s=Math.floor(n/a),M=Math.floor(n),c=Math.floor((t-s)/2),i=Math.floor((n-M)/2)):r>a&&(s=Math.floor(t),M=Math.floor(t*a),c=Math.floor((t-s)/2),i=Math.floor((n-M)/2))}else s=t,M=t,c=Math.floor((t-s)/2),i=Math.floor((n-M)/2);m.drawImage(a,c,i,s,M,0,0,o,e)}else t===n&&m.drawImage(a,0,0,o,e);m.scale(l,h),URL.revokeObjectURL(a.src),r(f)},a.onerror=()=>n(new Error("Image load error"))}))}o.d(e,{x:()=>n});const r=(o,e="image/webp",t=!1)=>{return r=void 0,n=void 0,l=function*(){try{return yield Promise.all(o).then((o=>((o,e)=>{const t=[];return o.forEach((o=>{t.push(new Promise(((t,r)=>{o.toBlob((o=>{o&&t(o),r(new Error("Blob with error"))}),e)})))})),Promise.all(t)})(o,e))).then((o=>{const r=[];for(let n=0;n<o.length;n++){const a=e.substring(e.indexOf("/")+1),l=new File([o[n]],`image_${n}.${a}`,{type:e});t&&o[n].type!==`image/${a}`&&console.error(`converted to ${o[n].type}, expected ${a}`),r.push(l)}return r}))}catch(o){throw new Error(`Something wrong with files, error message: ${o}`)}},new((a=void 0)||(a=Promise))((function(o,e){function t(o){try{f(l.next(o))}catch(o){e(o)}}function h(o){try{f(l.throw(o))}catch(o){e(o)}}function f(e){var r;e.done?o(e.value):(r=e.value,r instanceof a?r:new a((function(o){o(r)}))).then(t,h)}f((l=l.apply(r,n||[])).next())}));var r,n,a,l},n=(o,e=500,n=500,a="image/webp",l=!1)=>{if(o){const h=[];for(let r=0;r<o.length;r++){const a=o.item(r);if(a){const o=t(e,n,a);h.push(o)}}return r(h,a,l)}return Promise.reject([])};var a=e.x;export{a as imageConvert};